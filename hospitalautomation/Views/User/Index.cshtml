@model IEnumerable<hospitalautomation.Models.Dtos.UserDto>
@{
    Layout = "~/Views/Shared/_AdminLayout.cshtml";
}
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet" />

<!-- Custom CSS for label gradient and form styling -->
<style>
    /* Gradient Text Effect for labels */
    .gradient-text {
        background: linear-gradient(to right, #6a1b9a, #1e88e5);
        -webkit-background-clip: text;
        color: transparent;
    }

    /* Modern form fields */
    .form-control {
        border-radius: 10px;
        box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);
        border: 1px solid #ccc;
        transition: all 0.3s ease-in-out;
    }

    .form-control:focus {
        border-color: #6a1b9a;
        box-shadow: 0 0 5px rgba(106, 27, 154, 0.5);
    }

    /* Button styling for Create and Update (Blue gradient for create) */
    .btn-gradient-blue {
        background: linear-gradient(45deg, #1e88e5, #6a1b9a);
        /* Gradient background */
        border: 1px solid transparent;
        color: white;
        font-weight: bold;
        transition: all 0.3s ease;
    }

    .btn-gradient-blue:hover {
        background: linear-gradient(45deg, #1e88e5, #1565c0);
        /* Darker gradient on hover */
        border: 1px solid #1e88e5;
    }

    /* Düz Mavi Güncelle Butonu */
    .btn-update {
        background-color: #007bff;
        border-color: #007bff;
        color: white;
        font-weight: bold;
        transition: all 0.3s ease;
    }

    .btn-update:hover {
        background-color: #0056b3;
        border-color: #0056b3;
    }

    /* Modal customizations */
    .modal-content {
        border-radius: 15px;
    }
</style>

<div class="container mt-5">
    <div class="d-flex justify-content-between align-items-center mb-3">
        <h2>Kullanıcılar</h2>
        <button class="btn btn-success" data-bs-toggle="modal" data-bs-target="#createUserModal">Kullanıcı Ekle</button>
    </div>

    @if (Model != null && Model.Any())
    {
        <table class="table table-striped table-bordered">
            <thead class="table-dark">
                <tr>
                    <th>Id</th>
                    <th>İsim</th>
                    <th>Soyisim</th>
                    <th>Telefon</th>
                    <th>Email</th>
                    <th>Rol</th>
                    <th>Adres</th>
                    <th>İşlemler</th>
                </tr>
            </thead>
            <tbody>
               <tbody>
            @foreach (var user in Model)
            {
                <tr>
                    <td>@user.Id</td>
                    <td>@user.FirstName</td>
                    <td>@user.LastName</td>
                    <td>@user.TelNo</td>
                    <td>@user.Email</td>
                    <td>@user.Role</td>
                    <td>@user.Address</td>
                    <td>
    <button class="btn btn-sm btn-warning" data-bs-toggle="modal" 
        data-bs-target="#updateUserModal" 
        data-user-id="@user.Id"
        data-first-name="@user.FirstName"
        data-last-name="@user.LastName"
        data-email="@user.Email"
        data-address="@user.Address"
        data-telno="@user.TelNo"
        data-role="@user.Role">
    Güncelle
</button>
</td>
                    <td>
                        <form asp-action="DeleteUser" asp-route-userId="@user.Id" method="post" style="display:inline;">
                            <button type="submit" class="btn btn-sm btn-danger">Sil</button>
                        </form>
                    </td>
                </tr>
            }
        </tbody>
            </tbody>
        </table>
    }
    else
    {
        <div class="alert alert-warning" role="alert">
            Henüz kullanıcı bulunmamaktadır.
        </div>
    }
</div>

<!-- Modal -->
<div class="modal fade" id="createUserModal" tabindex="-1" aria-labelledby="createUserModalLabel" aria-hidden="true">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title" id="createUserModalLabel">Yeni Kullanıcı Oluştur</h5>
                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
            </div>
            <div class="modal-body">
                @if (!ViewData.ModelState.IsValid)
                {
                    <div class="alert alert-danger">
                        @foreach (var error in ViewData.ModelState.Values.SelectMany(v => v.Errors))
                        {
                            <p>@error.ErrorMessage</p>
                        }
                    </div>
                }
                <form asp-action="CreateUser" method="post">
                    <div class="form-group mb-3">
                        <label for="Email" class="gradient-text">Email</label>
                        <input type="email" class="form-control" id="Email" name="Email" required />
                    </div>
                    <div class="form-group mb-3">
                        <label for="Password" class="gradient-text">Şifre</label>
                        <input type="password" class="form-control" id="Password" name="Password" required />
                    </div>
                    <div class="form-group mb-3">
                        <label for="Role" class="gradient-text">Rol</label>
                        <select class="form-control" id="Role" name="Role" required>
                            <option value="">Rol Seçin</option>
                            <option value="0">Asistan</option>
                            <option value="1">Öğrenim Üyesi</option>
                        </select>
                    </div>
                    <div class="form-group mb-3">
                        <label for="FirstName" class="gradient-text">Ad</label>
                        <input type="text" class="form-control" id="FirstName" name="FirstName" required />
                    </div>
                    <div class="form-group mb-3">
                        <label for="LastName" class="gradient-text">Soyad</label>
                        <input type="text" class="form-control" id="LastName" name="LastName" required />
                    </div>
                    <div class="form-group mb-3">
                        <label for="Address" class="gradient-text">Adres</label>
                        <input type="text" class="form-control" id="Address" name="Address" required />
                    </div>
                    <div class="form-group mb-3">
                        <label for="TelNo" class="gradient-text">Telefon Numarası</label>
                        <input type="number" class="form-control" id="TelNo" name="TelNo" required />
                    </div>
                    <button type="submit" class="btn btn-gradient-blue">Kullanıcı Oluştur</button>
                </form>
            </div>
        </div>
    </div>
</div>

